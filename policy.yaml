# policy.yaml — Phase 8B / Manual Rebuy–aware
policy:
  # --- Pair / venue routing ---
  prefer_quotes:
    BINANCEUS: USDT
    COINBASE: USD
    KRAKEN:  USDT

  blocked_symbols:
    - BARK
    - BONK

  # --- Risk & sizing (per intent) ---
  max_per_coin_usd: 25          # hard cap per single rebuy
  min_quote_reserve_usd: 25     # below this, deny (for that quote/venue)
  keepback_usd: 5               # keep at least this much unspent
  canary_max_usd: 11            # first safety cap while system is young
  on_short_quote: resize        # resize | deny

  # --- Price expectations ---
  allow_price_unknown: false    # require price for all buys that need sizing

  # --- Cooldowns (still mostly advisory) ---
  cool_off_minutes_after_trade: 30

  # --- Router preference (if multiple venues viable) ---
  venue_order:
    - COINBASE
    - BINANCEUS
    - KRAKEN

  # --- Optional advanced knobs ---
  venue_min_notional_usd:
    BINANCEUS: 10              # don’t bother with tiny dust rebuys
    KRAKEN: 5

  # Example per-pair min-qty floors (tweak as needed)
  min_qty_floors:
    "BINANCEUS:BTCUSDT": 0.0001
    "KRAKEN:BTCUSDT":    0.0001
